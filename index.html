
<!DOCTYPE html><html>
<head>
    <meta charset="UTF-8" />
    <link rel="icon" href="./html/images/favicon.ico" type="image/x-icon" />
    <style>
        /* === Global styles === */
        body {
          margin: 0;
          padding: 0;
          background-color: #000;
          display: flex;
          flex-direction: row;
          justify-content: flex-start;
          align-items: flex-start;
          font-family: Arial, sans-serif;
          gap: 10px;
          flex-wrap: wrap;
        }

        @font-face {
          font-family: 'RDOFont';
          src: url('./Fonts/RDO_chinese_rocks_rg.otf') format('opentype');
          font-weight: normal;
          font-style: normal;
        }
        @font-face {
          font-family: 'hapna';
          src: url('./Fonts/hapna.woff2') format('woff2');
          font-weight: normal;
          font-style: normal;
        }

        /* === Layout containers === */
        .page-container {
          display: flex;
          flex-direction: column;
          min-height: 100vh;
        }
        .main-container {
          display: flex;
          flex-wrap: wrap;
          justify-content: flex-start;
          align-items: flex-start;
          gap: 10px;
          margin: 0;
          padding: 0;
        }

        .left-column {
          display: flex;
          flex-direction: column;
          max-width: 850px;
          width: 100%;
        }

        .sidebar-container {
          display: block;
          width: 450px;
          background-color: #111;
          color: #eee;
          /*border: 2px solid orange;*/
          padding: 15px;
          box-sizing: border-box;
          font-family: Arial, sans-serif;
          overflow: visible; /* allow images to stick outside */
          /* margin-left: -10px;shift left */
        }
        
        
        /* COLUMN 3: BONUS INFO - Fixed to 250px wide */
        .bonus-container {
            padding: 7px;
            background-color: #111; /*Dark grey background*/
            display: flex;
            flex-direction: column;
            /* --- FIXED WIDTH CHANGES --- */
            width: 250px; 
            min-width: 250px; 
            max-width: 850px;
            /*flex-shrink: 0; Ensures this column does not shrink, prioritizing the fixed width */
            /* --------------------------- */
        }
        

        .stats-heading {
            font-family: 'RDOFont', sans-serif;
            font-size: 1.3rem;
            margin-top: 0;
            margin-bottom: 5px;
            border-bottom: 2px solid #555;
            padding-bottom: 5px;
            color: #666666; /* PRESERVED: Keeping the original color */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            
        }
        
        .stats-text {
            font-family: 'hapna', sans-serif; /* Example font */
            font-size: .9rem;
            color: #aaa;
            white-space: pre-wrap; /* allows \n line breaks in descriptions */
            letter-spacing: -0.05em; 
            margin-top: 0;
            margin: 0;
        }

        /* *** FIX: Styling for non-shifting streak adjustment controls *** */
        #streak-controls {
            opacity: 0;
            visibility: hidden;
            color: #999;
            cursor: pointer;
            user-select: none;
            font-size: 0.8rem;
            margin-left: 10px;
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
        }
        #streak-container:hover #streak-controls {
            opacity: 1;
            visibility: visible;
        }
        #streak-up, #streak-down {
            padding: 0 4px;
        }
        #streak-up:hover, #streak-down:hover {
            color: #fff;
        }
        
     
        
        
        /* Ensure the animation class uses the 1000ms duration */
        .gold-exciting-flash {
            animation: simpleGoldGlow 1000ms ease-out forwards;
        }

        /* Define the simple glow keyframes */
        /* Ensure the animation class uses the 1ms duration for an instant state change */
        .gold-exciting-flash {
            animation: instantWhiteGlow 1ms forwards;
        }

        @keyframes instantWhiteGlow {
            /* 0% Start: Text and glow go instantly white */
            0% {
                color: white !important; 
                text-shadow: 
                    0 0 2px white,
                    0 0 4px #eeeeee; /* Strong white/silver glow */
                opacity: 1;
            }
            
            /* 100% End: We keep it at the flash state so the JavaScript timeout controls the duration */
            100% {
                color: white !important;
                text-shadow: 
                    0 0 3px white,
                    0 0 6px #eeeeee;
                opacity: 1;
            }
        }
        
        /* Set the animation class to use the correct keyframes and the JS duration */
        .gold-exciting-flash {
            /* The 1000ms duration is crucial, matching your JavaScript setTimeout */
            animation: instantWhiteGlow 1000ms forwards;
        }

            


        .banner-container {
          position: sticky;
          top: 0;
          z-index: 10; /* stays above other content */
          
          
          width: 100%;
          max-width: 850px;
          min-width: 400px;
          background-color: #000;
          /*border: 2px solid blue;*/
          box-sizing: border-box;
          padding: 10px;
          color: #eee;
        }

        .banner-image-wrapper {
          position: relative;
          width: 100%;
        }

        .banner-image {
          width: 100%;
          height: auto;
          display: block;
        }

        .banner-text-overlay {
          position: absolute;
          top: -3%;
          left: 50%;
          transform: translateX(-50%);
          color: white;
          text-align: center;
          width: 90%;
          text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
          pointer-events: none;
          font-family: 'RDOFont', sans-serif;
        }

        .banner-title {
          font-size: 2.5rem;
          margin: 10px 0;
          text-shadow:
            -2px -2px 0 #000,
             2px -2px 0 #000,
            -2px  2px 0 #000,
             2px  2px 0 #000;
        }

        .banner-date {
          font-size: 1.4rem;
          margin-bottom: 10px;
          margin-top: -15px;
          text-shadow:
           -1px -1px 2px #000,
            1px -1px 2px #000,
           -1px  1px 2px #000,
            1px  1px 2px #000;
        }

        .challenge-counters {
          position: absolute;
          bottom: 10px;
          left: 0;
          right: 0;
          display: flex;
          justify-content: space-between;
          padding: 0 15px;
          font-size: 1.25rem;
          color: white;
          text-shadow: 3px 3px 2px rgba(0,0,0,0.6);
          pointer-events: none;
          font-family: 'RDOFont', sans-serif;
          transform: scaleY(1.15); /* Increase font height */
          
        }

        .challenge-counters > div {
          white-space: nowrap;
        }

        .challenge-counters span {
          display: inline-block;
          width: 4ch;
          text-align: right;
        }
        
        .counter-glow {
          color: white;
          text-shadow:
            0 0 5px rgba(255, 255, 160, 0.75),  /* yellow glow with an opacity (0.75) */
            0 0 10px rgba(255, 255, 160, 0.75),
            0 0 15px rgba(255, 255, 160, 0.75);
          transition: text-shadow 0.3s ease;
        }
        
        @keyframes counterPop {
          0% {
            transform: scale(1);
          }
          50% {
            transform: scale(1.3);
          }
          100% {
            transform: scale(1);
          }
        }

        .counter-pop {
          animation: counterPop 0.4s ease forwards;
        }
        
        

        .general-challenges-container {
          width: 100%;
          max-width: 850px;
          margin: 0 auto;
          background-color: #111;
          padding: 15px;
          box-sizing: border-box;
          color: white;
          font-family: 'hapna', sans-serif;
          font-size: 1.25rem;
          text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
          /*border: 2px solid green;*/
        }



/* ############################################################# */
/*  Role challenges switching logic as browser viewport narrows  */
/* ############################################################# */
        
        /* NEW: Rule to hide the bonus container when screen is 1600px or less (The Requirement) */
        @media (max-width: 1600px) {
            .bonus-container {
                display: none; 
          }
        }
        
        
        
        /* Narrow screens: column layout, sidebar below main */
        @media (max-width: 1320px) {
          body {
            flex-direction: column;
            align-items: center;
          }
          
            .main-container {
            flex-direction: column;
            align-items: center;
            width: 100%;    /* allow children to fill horizontally */
            align-items: stretch; /* <— THIS is the key */
            min-width: 420px;
          }
          
          .sidebar-container {
            width: 100% !important; 
            max-width: 850px !important;
            margin-left: 0;    /* center below main container */
          }      
        }

        /* === Challenge checkboxes with wrapped text aligned properly === */
        .challenge label {
          display: flex; /* container */
          align-items: flex-start;  /* Align to the top of the checkbox */
          gap: 8px;                 /* Space between checkbox and text */
          position: relative; /* for absolute checkbox */
          padding-left: 0px; /* reserve space for checkbox */
          cursor: pointer;
          white-space: normal;
          line-height: 1.3;
        }
        
        .challenge:first-of-type label {
          margin-top: -8px; /* adjust as needed */
        }

        /* Position the checkbox at the left of label */
        .challenge-checkbox {
          width: 14px;
          height: 14px;
          margin: 0;
          margin-top: 6px;  /* Optional: better vertical alignment */
          appearance: none; /* Remove default styling */
          -webkit-appearance: none;
          background-color: #888; /* Default background */
          /* background-color: orange; /* TEST */*/
          border: 2px solid #333;
          border-radius: 3px;
          cursor: pointer;
        }
        
        .challenge-checkbox:checked {
          background-color: #222;
          background-color: #b00000;  /* Dark Red Colour */
          border: 2px solid #333;
          border-radius: 3px;
        }
        
        /* add a checkmark */
        .challenge-checkbox:checked::before {
          content: "✔";
          display: block;
          text-align: top;
          color: white;
          font-size: 12px;
          line-height: 10px;
        }
        

        /* Text span with hanging indent:
           first line starts after checkbox,
           wrapped lines align under text, NOT under checkbox */
           
        .challenge-text {
          display: block;
          display: block;
          word-wrap: break-word;
          max-width: 100%;
          user-select: none;
        }


        /* Optional: styling for challenge description */
        .challenge-desc {
          margin-left: 22px; /* indent to align with text */
          font-size: 1rem;
          color: #999999;
          padding-bottom: 7px;
          white-space: pre-wrap;  /* Preserve \n line breaks and wrap long lines */
          line-height: 1.2;  /* smaller numbers = tighter spacing */
        }
        
        .thin-divider {
          border: none;
          border-top: 1px solid #444;
          /*width: 825px;    Allowing this will kill the word-wrap and dynamic resizing of the general challenges*/
          max-width: 100%;
          margin: 8px auto;
        }


    
        .role-heading {
            font-family: 'RDOFont', sans-serif;  /* Example font, change as needed */
            font-size: 1.5rem;
            color: #eee;
            margin: -4px 0 0 0;
            
            text-shadow:
            -3px -3px 0 #000,  
             3px -3px 0 #000,
            -3px 3px 0 #000,
             3px 3px 0 #000;
             text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
            letter-spacing: 0.05em; /* Adjust this value to your liking */
            padding-left: 20px; /* Increase this to move the text right */
            background-color: transparent;
            overflow: visible;
            /*Adding picture behind the heading text*/
            z-index: 0; /* Create a stacking context */
            background-image: url('HTML/images/RDO_Role_Challenges_Header3.png');
            background-repeat: no-repeat;
            background-position: 2px center;
            background-size: 410px 35px;
            
            display: flex;
            justify-content: space-between;
            align-items: center;
    
        }
            /* Space between different role challenges */
            .role-challenge {
              margin-bottom: .6rem; /* adjust as needed */
            }

        .role-challenge-text {
            font-family: 'hapna', sans-serif; /* Example font */
            font-size: 1.05rem;
            color: #eee;
            display: inline-block; /* keeps it inline for natural text flow */
            line-height: 1.1;
            display: inline;
            transform: scaleY(1.1); /* Increase font height */


        }
        .role-challenge-desc {
            font-family: 'hapna', sans-serif; /* Example font */
            font-size: 1rem;
            color: #aaa;
            margin-left: 6px; /* aligns under the role challenge text */
            white-space: pre-wrap; /* allows \n line breaks in descriptions */
            transform: scaleX(0.925); /* reduce width to 90% */
        }
        
        /*  ##### Role Challenges Tickboxes ##### */
        
        /* Unchecked state */
        .role-challenge input[type="checkbox"] {
            width: 14px;
            height: 14px;
            margin: 0;
            margin-top: 0px;  /* Optional: better vertical alignment */
            appearance: none; /* Remove default styling */
            -webkit-appearance: none;
            background-color: #888; /* Default background */
            border: 2px solid #333;
            border-radius: 3px;
            cursor: pointer;
        }
        
        /* Checked state */
        .role-challenge input[type="checkbox"]:checked {
            background-color: #222;
            background-color: #b00000;  /* Dark Red Colour */
            border: 2px solid #333;
            border-radius: 3px;
        }
        .role-challenge input[type="checkbox"]:checked::before {
            content: "✔";
            display: block;
            text-align: center;
            color: white;
            font-size: 12px;
            line-height: 14px;
            vertical-align: middle;
            position: relative;
            top: -2px; /* Adjust this value to fine-tune the vertical alignment */
        }
        
        
        .role-challenge-label {
          display: flex;
          align-items: baseline; /* aligns checkbox with first line of text */
          gap: 0.5em;               /* space between checkbox and text */
          cursor: pointer;
          user-select: none;
          -webkit-user-select: none; /* Safari */
          -moz-user-select: none; /* Firefox */
          -ms-user-select: none; /* IE/Edge */
          
        }
        
        /* Using this to scale role challenge text */
        .text-scale {
            display: inline-block;
            transform: scaleX(0.9);
            transform-origin: left;
        }
        
        /* Makes it clickable */
        .difficulty-toggle {
            cursor: pointer;
            user-select: none;
            font-size: 0.6em;  /* adjust if needed */
            margin-right: 10px; /* adjust px as you like */
            color: #dd0000;  /* Dark Red Colour */
            transform: scaleY(1.2); 
            /* Mid-grey outline effect */
            text-shadow:
              -1px -1px 0 #111111,
               1px -1px 0 #111111,
              -1px  1px 0 #111111,
               1px  1px 0 #111111;
            }
        
        /* Dimming the difficulty-toggle */
        .dimmed-text {
            opacity: 0.5;
            pointer-events: none;
            user-select: none;
        }


        
        

/* ==== Checkbox Challenge Completion Styling ==== */


        /* When checkbox is checked, style the following sibling text */
        .challenge-checkbox:checked + .challenge-text,
        .challenge-checkbox:checked + .role-challenge-text {
          color: #555;
          text-decoration: line-through;
          opacity: 0.5;
        }


        /* This dims both the challenge text and the description when the challenge is completed */
        .challenge.completed .challenge-text,
        .challenge.completed .challenge-desc,
        .role-challenge.completed .role-challenge-text,
        .role-challenge.completed .role-challenge-desc {
          color: #555 !important;
          /* Uncomment if you want strikethrough and opacity effect */
          text-decoration: line-through;
          opacity: 0.85;
        }
        
        
        .role-completed {
          color: #555;
          font-weight: bold;
        }


        /* Dim role challenges and headings when all 9 role challenges are completed */
        .role-completed .role-challenge-text,
        .role-completed .role-heading {
          opacity: 0.5; /* dim text and headings */
          color: #666;  /* optional dim color */
          transition: opacity 0.3s ease;
          background: orange;
        }

        /* Keep checkboxes fully visible and interactive */
        .role-completed .challenge-checkbox {
          opacity: 1 !important;
          pointer-events: auto;
        }


        .role-challenge-desc.dimmed {
          opacity: 0.5;
          color: #666666;
          transition: opacity 0.3s ease, color 0.3s ease;
        }



/* ==== Global Checkbox Role Challenge Completion Styling (9 out of 9)==== */


        /* Global dimming for all text elements when all roles are complete */
        .all-roles-completed .role-heading,
        .all-roles-completed .role-challenge-label span, /* Targets the Challenge Name */
        .all-roles-completed .role-challenge-desc, /* ✅ NEW: Targets the Description Element */
        .all-roles-completed .role-challenge p /* General Paragraph Fallback */
        {
          color: #888 !important; 
          opacity: 0.5 !important; /* Forces dimming, overriding competing rules */
          transition: color 0.3s, opacity 0.3s;
        }

        /* When 9/9 roles are complete, make the entire DIV of any unticked challenge non-interactive */
        .all-roles-completed .role-challenge:not(.completed) {
            pointer-events: none;
            cursor: default;
        }

        /* Then, specifically dim the checkbox inside that disabled DIV for visual feedback */
        .all-roles-completed .role-challenge:not(.completed) input[type="checkbox"] {
            opacity: 0.35 !important;
        }
        
        
    /*############ RDO-CLOCK SECTION ############*/        
        .rdo-clock {
            position: absolute;
            bottom: 5px;  /* Position near the bottom of the banner */
            left: 47.5%;
            transform: translateX(-50%);
            transform: translateY(-2px);  /* Negative value moves it up */
            font-family: 'RDOFont', sans-serif;
            font-size: calc(1.5vw + 0.8rem);
            color: #white;
            text-shadow:
             -4px -4px 4px #cf0202,
              4px -4px 4px #cf0202,
             -4px  4px 4px #cf0202,
              4px  4px 4px #cf0202;
        }
        
        .rdo-clock.night-glow {
            text-shadow:
            -4px -4px 4px #0d2542,
             4px -4px 4px #0d2542,
            -4px  4px 4px #0d2542,
             4px  4px 4px #0d2542;
            /*color: #white;               Optional: change text color too */
}



    /*############ API CREDIT SECTION ############*/
        .api-credit-separator {
            border: none;
            height: 15px;               /* Thickness of the line */
            background-color: black;
            margin: 10px -15px;         /* Vertical spacing, and negative horizontal to counter the container padding so it stretches all the way across */
        }


        /* API credit styling */
        .api-credit {
          margin-top: auto;
          margin-bottom: 0px;
          padding: 0px 0 0px 5px;
          font-size: 0.75rem;
          color: #5b5b5b;
          font-family: Arial, sans-serif;
          text-align: right;
          line-height: 1
        }
        .api-credit a {
          color: #5b5b5b;
          text-decoration: none;
        }
        .api-credit a:hover {
          text-decoration: underline;
          color: #8e7878;
        }
        
        
     /*############ PAUSE RDR BUTTON SECTION ############*/       
        .pause-rdr2-button {
            position: absolute;
            top: 12px;
            left: 12px;
            z-index: 9999;
            padding: 6px 10px;
            background-color: #b00000;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            font-family: 'hapna', sans-serif;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.4);
            transition: background-color 0.3s ease;
        }
        .pause-rdr2-button:hover {
            background-color: #900000;
        }
        
        #pauseBtn {
          position: absolute;
          top: 5px;
          right: 10px;
          width: 100px;
          cursor: pointer;
          display: none;    /* hidden by default */
          filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.6));
        }
        
        #pauseBtn:hover {
          filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.8));
          transform: scale(1.05);
        }

    /*############ GOLD LOG CHART ############*/
        #gold-log-chart-container {
            display: flex;
            justify-content: flex-start; /* Aligns bars to the left */
            align-items: flex-end;
            height: 75px;
            width: 100%;
            background-color: #151515;
            border: 1px solid #000;
            border-radius: 8px;
            padding: 2px;
            box-sizing: border-box;
            gap: 2px;
            overflow: hidden; /* Prevents scrollbar */
        }

        .chart-bar-wrapper {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 100%;
        }

        .chart-bar {
            width: 100%;
            background-color: #B8860B; /* Darker Gold */
            border-radius: 2px 2px 0 0;
            transition: background-color 0.2s ease;
            min-height: 1px;
        }
        
        .chart-bar-wrapper:hover .chart-bar {
            background-color: #FFE957; /* Brighter gold for highlight */
        }
        
        .chart-info-display {
            color: #5b5b5b;
            font-family: 'hapna', sans-serif; /* Use hapna font */
            font-size: 0.8rem;
            text-align: left; /* Justify left */
            padding-left: 5px; /* Add some padding */
            height: 1.2em;
            margin-top: -3px; /* reduce or increase to move graph's 'tooltip' text up or down */
            transition: color 0.2s;
            letter-spacing: -0.05em; /* Add this line for narrower text */
        }
        
    </style>
</head>
<body>
    <div class="main-container">
        <div class="left-column">
            <div class="banner-container">
                <div class="banner-image-wrapper">
                    <img src="HTML/images/RDO_Banner_Wide.jpg" alt="Banner" class="banner-image"/>
                    <img id="pauseBtn" src="HTML/images/RDO_PauseStopwatch.png" alt="Pause RDO" title="Pause RDO"
                         style="position:absolute; top:0px; left:10px; width:50px; cursor:pointer;" />                    
                    <div class="banner-text-overlay">
                        <h1 class="banner-title">Daily Challenges</h1>
                        <div class="banner-date">Tuesday, 18th November 2025</div>
                    </div>
                    <div class="challenge-counters">
                        <div>General Challenges <span id="general-counter">(0/7)</span></div>
                        <div>Role Challenges <span id="role-counter">(0/9)</span></div>
                    </div>
                    <div class="rdo-clock" id="rdo-clock">
                        --:--
                    </div>
                </div>
            </div>

            <div class="general-challenges-container">
                
        <div class="challenge" data-difficulty="None">
          <label>
            <input type="checkbox" class="challenge-checkbox" id="challenge_2025-11-18_b30c83711d388200" />
            <span class="challenge-text">5 Blackcurrants picked</span>
          </label>
          <div class="challenge-desc">Just north of the big mansion in Tumbleweed, there are 3 patches of blackcurrants.</div></div>
<hr class="thin-divider">

        <div class="challenge" data-difficulty="None">
          <label>
            <input type="checkbox" class="challenge-checkbox" id="challenge_2025-11-18_1453e341d64a3cc3" />
            <span class="challenge-text">3 Cooked Seasoned Flaky Fish</span>
          </label></div>
<hr class="thin-divider">

        <div class="challenge" data-difficulty="None">
          <label>
            <input type="checkbox" class="challenge-checkbox" id="challenge_2025-11-18_704d1a42ef85c4cc" />
            <span class="challenge-text">5 Fish caught with a lure</span>
          </label>
          <div class="challenge-desc">The special spinner works for this challenge as well.</div></div>
<hr class="thin-divider">

        <div class="challenge" data-difficulty="None">
          <label>
            <input type="checkbox" class="challenge-checkbox" id="challenge_2025-11-18_1332c269fa06e9ba" />
            <span class="challenge-text">Herb Picking Contest completed</span>
          </label></div>
<hr class="thin-divider">

        <div class="challenge" data-difficulty="None">
          <label>
            <input type="checkbox" class="challenge-checkbox" id="challenge_2025-11-18_285d154e821fc862" />
            <span class="challenge-text">Multiple Player kills in 5 seconds in Posse Versus</span>
          </label></div>
<hr class="thin-divider">

        <div class="challenge" data-difficulty="None">
          <label>
            <input type="checkbox" class="challenge-checkbox" id="challenge_2025-11-18_6c444c5d46d9294d" />
            <span class="challenge-text">1 Player kills from the hip in Free Roam Events</span>
          </label>
          <div class="challenge-desc">Revolvers fired without aiming first seem a good way, you can fire repeatedly very quickly.
Cold Dead Hands and King Of The Castle are the best bet for completion.</div></div>
<hr class="thin-divider">

        <div class="challenge" data-difficulty="None">
          <label>
            <input type="checkbox" class="challenge-checkbox" id="challenge_2025-11-18_7fb35d80dce0729f" />
            <span class="challenge-text">2 Snakes skinned</span>
          </label>
          <div class="challenge-desc">Past the large wooden plank bridge by the Sea Of Corrado, New Austin, in the middle of the U-Bend.</div></div>

            </div>
        </div>

<!-- COLUMN 2: ROLE CHALLENGES -->
        <div class="sidebar-container" id="roles-container">
            <div class="role-container">
  <h3 class="role-heading" id="role-bounty-hunter">Bounty Hunter&nbsp; <span class="difficulty-toggle RDOFont" data-difficulty="hard">(Hard: Rank 15+)</span></h3>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_7c140dc80ee8b55b" />
            <span class="role-challenge-text">1 Bounty targets hogtied with a Reinforced Lasso</span>
          </label></div>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_6a76260d214c5a5c" />
            <span class="role-challenge-text">1 Bounty targets looted</span>
          </label></div>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_460bb7e7b36775a8" />
            <span class="role-challenge-text">1 More than one bounty target brought in at once</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_415cc79724ecf9a3" />
            <span class="role-challenge-text">2 Bounties brought in from West Elizabeth posters</span>
          </label>
          <div class="role-challenge-desc">Strawberry, Blackwater, Wallace Station, and Riggs Station</div></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_0278ff2b0d677d01" />
            <span class="role-challenge-text">2 Bounty targets brought in</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_16775e1c2359a314" />
            <span class="role-challenge-text">1 Bounty targets tagged with Tracking Arrow</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_415cc79724ecf9a3" />
            <span class="role-challenge-text">2 Bounties brought in from West Elizabeth posters</span>
          </label>
          <div class="role-challenge-desc">Strawberry, Blackwater, Wallace Station, and Riggs Station</div></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_aac61ef1b09f3212" />
            <span class="role-challenge-text">1 Hard ($$$) or Legendary Bounty mission completed</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_121e660060f222b2" />
            <span class="role-challenge-text">1 Player bounties collected</span>
          </label></div>
</div>
<hr class="thin-divider" />
<div class="role-container">
  <h3 class="role-heading" id="role-trader">Trader&nbsp; <span class="difficulty-toggle RDOFont" data-difficulty="hard">(Hard: Rank 15+)</span></h3>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_3f94319b7b442020" />
            <span class="role-challenge-text">Goods sold to distant buyer</span>
          </label></div>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_9c5204c7a9cfaa79" />
            <span class="role-challenge-text">High Quality Camp Stew recipes completed</span>
          </label></div>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_313ba5b2eda4cf9d" />
            <span class="role-challenge-text">1 Resupply missions completed</span>
          </label>
          <div class="role-challenge-desc">Buggy, often won't register</div></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_a5f146bb2bfbc47c" />
            <span class="role-challenge-text">10 Carcasses donated within 10 minutes</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_a54ddaa847862b1b" />
            <span class="role-challenge-text">2 Goods sold to distant buyer</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_d48016ddc4f1f1a9" />
            <span class="role-challenge-text">6 Small animal carcasses donated to Cripps</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_e2fc25cd87a58806" />
            <span class="role-challenge-text">6 Large animal carcasses donated to Cripps</span>
          </label>
          <div class="role-challenge-desc">Deer, Pronghorn, Bighorn Ram, Panther, Cougar, Wolf</div></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_f584c6c3976ff8a7" />
            <span class="role-challenge-text">7 Medium animal carcasses donated to Cripps</span>
          </label>
          <div class="role-challenge-desc">Emerald Ranch, for sheep, turkeys, & foxes.
Racoons, Geese, Cranes, Herons, & Pelicans</div></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_3b59724647115f0a" />
            <span class="role-challenge-text">$200.00 Money made from trading</span>
          </label></div>
</div>
<hr class="thin-divider" />
<div class="role-container">
  <h3 class="role-heading" id="role-collector">Collector&nbsp; <span class="difficulty-toggle RDOFont" data-difficulty="hard">(Hard: Rank 15+)</span></h3>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_31c73b6630729e40" />
            <span class="role-challenge-text">1 Antique Alcohol drunk</span>
          </label></div>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_2b95a2b3e1a3e9ac" />
            <span class="role-challenge-text">1 Bird Eggs found</span>
          </label>
          <div class="role-challenge-desc">Keep less than 5 duck eggs in your satchel, and you can then pick 5 of them at once</div></div>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_8578cc1b3e172eab" />
            <span class="role-challenge-text">1 Coins found</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_1f491d57d0a67dca" />
            <span class="role-challenge-text">2 Collectibles found with a Shovel</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_547e5ac1600566e6" />
            <span class="role-challenge-text">2 Collectibles sold to Madam Nazar</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_18e681e3a217d7fc" />
            <span class="role-challenge-text">2 Family Heirlooms found</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_98be3bcfdd3cbf7e" />
            <span class="role-challenge-text">6 Collectibles collected</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_36c74c07935432b3" />
            <span class="role-challenge-text">3 Collectibles found with a Shovel</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_9e5b72f6a24b7d39" />
            <span class="role-challenge-text">3 Family Heirlooms found</span>
          </label></div>
</div>
<hr class="thin-divider" />
<div class="role-container">
  <h3 class="role-heading" id="role-moonshiner">Moonshiner&nbsp; <span class="difficulty-toggle RDOFont" data-difficulty="hard">(Hard: Rank 15+)</span></h3>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_119b104a967e8b9d" />
            <span class="role-challenge-text">Completed regular or better moonshine recipe</span>
          </label></div>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_e30d79e4a3638309" />
            <span class="role-challenge-text">1609 Distance Moonshine Wagon traveled on mission</span>
          </label></div>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_f6ab0cbde3ffe0f2" />
            <span class="role-challenge-text">Moonshine of any type sold to a buyer</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_2bf1e0a412b2d5ca" />
            <span class="role-challenge-text">Drank own average or higher strength moonshine</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_f3459e4f3292f9af" />
            <span class="role-challenge-text">2 Moonshine Bootlegger Missions completed</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_f26447c28caa4dd9" />
            <span class="role-challenge-text">2 Moonshine served to other players at a bar</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_2529c09bd2ba077b" />
            <span class="role-challenge-text">$200.00 Money made from moonshine sold</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_95f296355ab8a02f" />
            <span class="role-challenge-text">2 Moonshine Bar - Danced for 2 mins</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_49bcd0f4ce51494a" />
            <span class="role-challenge-text">2 Moonshine of preferred type sold to a buyer</span>
          </label></div>
</div>
<hr class="thin-divider" />
<div class="role-container">
  <h3 class="role-heading" id="role-naturalist">Naturalist&nbsp; <span class="difficulty-toggle RDOFont" data-difficulty="hard">(Hard: Rank 15+)</span></h3>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_a04f5ec0bd736c6b" />
            <span class="role-challenge-text">1 Blending Tonics crafted or used</span>
          </label></div>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_cf51af02d7363d67" />
            <span class="role-challenge-text">Don't kill an animal for 12 game hours</span>
          </label></div>

        <div class="role-challenge" data-difficulty="easy">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_284a4be7f5835d48" />
            <span class="role-challenge-text">1 Legendary Animals photographed</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_c3e539a86cd5b9ff" />
            <span class="role-challenge-text">5 Crafted or cooked at Wilderness Camp</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_221236541d4abf9a" />
            <span class="role-challenge-text">1 Hardy Tonics used when too hot or cold</span>
          </label></div>

        <div class="role-challenge" data-difficulty="med">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_284a4be7f5835d48" />
            <span class="role-challenge-text">1 Legendary Animals photographed</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_6cdbce1b8ac129af" />
            <span class="role-challenge-text">2 Blending Tonics crafted or used</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_c36d02f902de2cbc" />
            <span class="role-challenge-text">Don't kill an animal for 24 game hours</span>
          </label></div>

        <div class="role-challenge" data-difficulty="hard">
          <label class="role-challenge-label">
            <input type="checkbox" class="challenge-checkbox" id="role-challenge_2025-11-18_d959c68a05bca1fa" />
            <span class="role-challenge-text">2 Sedated animals revived</span>
          </label></div>
</div>

            
            <hr class="api-credit-separator" />
            
            <div class="api-credit">
                <span class="api-label">Data provided by:&nbsp;</span>
                <a href="https://rdo.gg/api" target="_blank" class="api-link">rdo.gg API</a>
            </div>
        </div>

<!-- COLUMN 3: BONUS INFO (Now the final column, cleared of content) -->
        <div class="bonus-container" id="bonus-container">
            <h3 class="stats-heading" style="color: #666666;">Bonus Info</h3>
            
            <div style="padding: 2px; border: 1px solid #000; border-radius: 8px; background-color: #151515; text-align: left; color: #E0E0E0; font-family: sans-serif;">
                
                <!-- *** FIX: Restructured Streak HTML for proper alignment *** -->
                <p class="stats-text" id="streak-container" style="margin-bottom: 2px; display: flex; justify-content: space-between; align-items: center; width: 100%;">
                    <span style="display: flex; align-items: center; white-space: nowrap;">
                        <span style="font-weight: 500;">Daily Challenge Streak:</span>
                        <span id="streak-controls">
                            <span id="streak-down">▼</span><span id="streak-up">▲</span>
                        </span>
                    </span>
                    <span id="current-streak" style="color: #FFC107; text-align: right;">0 Days</span>
                </p>

                <p class="stats-text" style="margin-bottom: 2px; display: flex; justify-content: space-between; width: 100%;">
                    <span style="font-weight: 500;">Gold Per Challenge:</span>
                    <span id="gold-per-challenge" style="color: #FFC107; text-align: right;">0.00 Gold Bars</span>
                </p>
                
                <p class="stats-text" style="margin-bottom: 2px; display: flex; justify-content: space-between; width: 100%;">
                    <span style="font-weight: 500;">Completion Reward:</span>
                    <span id="completion-bonus-reward" style="color: #FFC107; text-align: right;">0.00 Gold Bars</span>
                </p>
                
                <p class="stats-text" style="margin-bottom: 2px; display: flex; justify-content: space-between; width: 100%;">
                    <span style="font-weight: 500;">Daily Gold Total:</span>
                    <span id="daily-gold-total" style="color: #FFC107; text-align: right;">0.00 Gold Bars</span>
                </p>
                
                <p class="stats-text" style="margin-bottom: 2px; display: flex; justify-content: space-between; width: 100%;">
                    <span style="font-weight: 500;">7 Day Gold Total:</span>
                    <span id="cycle-gold-total" style="color: #FFC107; text-align: right;">0.00 Gold Bars</span>
                </p>
                
                <p class="stats-text" style="display: flex; justify-content: space-between; width: 100%;">
                    <span style="font-weight: 500;">Streak Gold Total:</span>
                    <span id="streak-gold-total" style="color: #FFC107; text-align: right;">0.00 Gold Bars</span>
                </p>
                
            </div>

            <!-- Gold Log Chart Container -->
            <h3 class="stats-heading" style="color: #666666; margin-top: 15px;">Gold Log (Last 28 Days)</h3>
            <div id="gold-log-chart-container">
                <!-- Bars will be injected here by JavaScript -->
            </div>
            <div id="chart-info-display" class="chart-info-display">&nbsp;</div>


        <!-- END COLUMN 3 -->
    </div> 
  
  
<!-- Default Statcounter code for RDO_dailies - codedunky
https://codedunky.github.io/RDO_dailies/ -->
<script type="text/javascript">
var sc_project=13147326; 
var sc_invisible=1; 
var sc_security="51162dbd"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img
class="statcounter"
src="https://c.statcounter.com/13147326/0/51162dbd/1/"
alt="Web Analytics"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
<!-- End of Statcounter Code -->  
  
  




<script>
// ////////////////////////////////////////////////////////////////////////////////////// //
// JavaScript: Check if flask server is running and show or hide button accordingly       //
// ////////////////////////////////////////////////////////////////////////////////////// //

fetch('http://127.0.0.1:6969/status')
    .then(response => {
      if (response.ok) {
        document.getElementById('pauseBtn').style.display = 'inline';
      } else {
        document.getElementById('pauseBtn').style.display = 'none';
      }
    })
    .catch(error => {
      // Server is unreachable
      document.getElementById('pauseBtn').style.display = 'none';
    });

// ////////////////////////////////////////////////////////////////////////////////////// //
// JavaScript: Resize text size dynamically based on container width for better accuracy  //
// ////////////////////////////////////////////////////////////////////////////////////// //

function resizeBannerText() {
    const container = document.querySelector('.banner-container');
    const title = document.querySelector('.banner-title');
    const date = document.querySelector('.banner-date');
    const counters = document.querySelector('.challenge-counters');
    const clock = document.getElementById('rdo-clock');

    if (!container) return;

    const containerWidth = container.offsetWidth;
    const minWidth = 400;
    const maxWidth = 850;

    const scale = Math.max(minWidth, Math.min(containerWidth, maxWidth)) / maxWidth;

    title.style.fontSize = (2.5 * scale) + 'rem';
    date.style.fontSize = (1.4 * scale) + 'rem';
    counters.style.fontSize = (1.25 * scale) + 'rem';
    
    if (clock) {
    clock.style.fontSize = (2 * scale) + 'rem';
    }
}

window.addEventListener('resize', resizeBannerText);
window.addEventListener('load', resizeBannerText);

// ////////////////////////////////////////////////////////////////////////////////////// //
// JavaScript: In-Game clock routine                                                      //
// ////////////////////////////////////////////////////////////////////////////////////// //

const offsetSeconds = -600;  // -10 minutes offset

function getInGameHour() {
    const now = new Date();
    const utcSeconds = now.getUTCHours() * 3600 + now.getUTCMinutes() * 60 + now.getUTCSeconds();
    const gameSeconds = (utcSeconds * 30 + offsetSeconds) % 86400;
    const gameHours = Math.floor(gameSeconds / 3600);
    const gameMinutes = Math.floor((gameSeconds % 3600) / 60);
    return gameHours + gameMinutes / 60;
}

function updateRDOClock() {
    const hourFloat = getInGameHour();
    const gameHours = Math.floor(hourFloat).toString().padStart(2, '0');
    const gameMinutes = Math.floor((hourFloat % 1) * 60).toString().padStart(2, '0');
    document.getElementById("rdo-clock").textContent = `${gameHours}:${gameMinutes}`;
}

// ////////////////////////////////////////////////////////////////////////////////////// //
// JavaScript: Swap banner image between 10pm and 5am                                     //
// ////////////////////////////////////////////////////////////////////////////////////// //

function updateBanner() {
    const hour = getInGameHour();
    const banner = document.querySelector('.banner-image');

    if (hour >= 22 || hour < 5) {
        if (!banner.src.endsWith("RDO_Banner_Wide_Night.jpg")) {
            banner.src = "HTML/images/RDO_Banner_Wide_Night.jpg";
        }
    } else {
        if (!banner.src.endsWith("RDO_Banner_Wide.jpg")) {
            banner.src = "HTML/images/RDO_Banner_Wide.jpg";
        }
    }
}

// ////////////////////////////////////////////////////////////////////////////////////// //
// JavaScript: Change clock glow colour between 10pm and 5am                              //
// ////////////////////////////////////////////////////////////////////////////////////// //

function updateClockGlow() {
    const hour = getInGameHour();
    const clock = document.querySelector('.rdo-clock');

    if (hour >= 22 || hour < 5) {
        clock.classList.add('night-glow');
    } else {
        clock.classList.remove('night-glow');
    }
}

// ////////////////////////////////////////////////////////////////////////////////////// //
// JavaScript: Call various time related functions                                        //
// ////////////////////////////////////////////////////////////////////////////////////// //

function updateAllTimeFunctions() {
    updateRDOClock();
    updateBanner();
    updateClockGlow();
}

setInterval(updateAllTimeFunctions, 1000);
updateAllTimeFunctions();

// ////////////////////////////////////////////////////////////////////////////////////// //
// JavaScript: Main logic for toggling, persistence, counters, and difficulty switching  //
// ////////////////////////////////////////////////////////////////////////////////////// //

document.addEventListener("DOMContentLoaded", function() {

    // --- CONSTANTS INJECTED FROM PYTHON ---
    const PYTHON_STREAK_OVERRIDE = -1;
    const PYTHON_CHALLENGE_TIMESTAMP = "1763445600";

    // --- DAILY RESET LOGIC ---
    const lastKnownTimestamp = localStorage.getItem('rdoLastKnownTimestamp');

    if (lastKnownTimestamp !== PYTHON_CHALLENGE_TIMESTAMP) {
        Object.keys(localStorage).forEach(key => {
            if (key.includes('_challenge_') || key.includes('role-challenge_')) {
                localStorage.removeItem(key);
            }
        });
        localStorage.setItem('dailyGoldTotalForComparison', '0.00 Gold Bars');
    }
    
    // --- LOCAL STORAGE KEYS ---
    const LS_STREAK_COUNT = 'rdoStreakCount';
    const LS_LAST_COMPLETION_DATE = 'rdoLastCompletionDate';
    const LS_CHALLENGE_STATUS = 'rdoChallengeStatus';
    const LS_STREAK_FOR_MULTIPLIER = 'rdoStreakForMultiplier'; 
    const MAX_RDO_STREAK = 28;
    const LS_STREAK_GOLD_TOTAL = 'rdoStreakGoldTotal';
    const LS_STREAK_GOLD_TOTAL_RUNNING = 'rdoStreakGoldTotalRunning';
    const LS_GOLD_LOG = 'rdoGoldLog';
    
    // --- ELEMENT SELECTORS ---
    const allCheckboxes = document.querySelectorAll('.challenge-checkbox');
    const generalCheckboxes = document.querySelectorAll('.challenge-checkbox[id^="challenge_"]');
    const roleCheckboxes = document.querySelectorAll('.challenge-checkbox[id^="role-challenge_"]');
    
    // --- UTILITY FUNCTIONS ---
    function getRDODayKey() {
        const now = new Date();
        const resetTimeHours = 6; 
        const date = new Date(now.getTime());
        if (date.getUTCHours() < resetTimeHours) {
            date.setUTCDate(date.getUTCDate() - 1);
        }
        const year = date.getUTCFullYear();
        const month = String(date.getUTCMonth() + 1).padStart(2, '0');
        const day = String(date.getUTCDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }

    function getDateDifferenceInDays(dateStr1, dateStr2) {
        const date1 = new Date(`${dateStr1}T12:00:00Z`);
        const date2 = new Date(`${dateStr2}T12:00:00Z`);
        return Math.round(Math.abs(date2 - date1) / (1000 * 60 * 60 * 24));
    }
    
    function setStreakCount(newCount, setCompleted) {
        const count = Math.min(Math.max(0, newCount), MAX_RDO_STREAK); 
        localStorage.setItem(LS_STREAK_COUNT, count);
        
        if (setCompleted) {
            localStorage.setItem(LS_LAST_COMPLETION_DATE, getRDODayKey());
            localStorage.setItem(LS_CHALLENGE_STATUS, 'completed');
        } else {
            localStorage.removeItem(LS_LAST_COMPLETION_DATE);
            localStorage.removeItem(LS_CHALLENGE_STATUS);
        }
    }

    function getMultiplier() { 
        const lockedStreak = parseInt(localStorage.getItem(LS_STREAK_FOR_MULTIPLIER) || '0', 10);
        if (lockedStreak >= 21) return 2.5;
        if (lockedStreak >= 14) return 2.0;
        if (lockedStreak >= 7) return 1.5;
        return 1.0; 
    }

    function calculateDailyGoldTotal(completedGeneral, completedRole) {
        const BASE_REWARD = 0.10; 
        const COMPLETION_BONUS_BASE = 0.30; 
        const multiplier = getMultiplier();
        const completionBonusAmount = COMPLETION_BONUS_BASE * multiplier;
        const generalGold = (completedGeneral * BASE_REWARD) * multiplier;
        const generalBonus = (completedGeneral === 7) ? completionBonusAmount : 0;
        const roleGold = (completedRole * BASE_REWARD) * multiplier;
        const roleBonus = (completedRole === 9) ? completionBonusAmount : 0;
        const totalGold = generalGold + generalBonus + roleGold + roleBonus;
        
        document.getElementById('gold-per-challenge').innerHTML = formatGoldForDisplay(BASE_REWARD * multiplier);
        document.getElementById('completion-bonus-reward').innerHTML = formatGoldForDisplay(completionBonusAmount);
        
        return Math.round(totalGold * 100) / 100;
    }
    
    function formatGoldForDisplay(goldValue) {
        const fixedValue = goldValue.toFixed(2);
        const parts = fixedValue.split('.');
        const integerPart = parts[0];
        const decimalPart = parts[1];
        return `<span>${integerPart}</span><span class="gold-decimal">.${decimalPart}</span> Gold Bars`;
    }

    function logDailyGold(goldAmount, streakCount, generalCount, roleCount) {
        const today = getRDODayKey();
        
        // --- STRICT DATE CHECK ---
        // 1. Get the date of the file currently loaded in Python
        const challengeDateObj = new Date(PYTHON_CHALLENGE_TIMESTAMP * 1000);
        const cYear = challengeDateObj.getUTCFullYear();
        const cMonth = String(challengeDateObj.getUTCMonth() + 1).padStart(2, '0');
        const cDay = String(challengeDateObj.getUTCDate()).padStart(2, '0');
        const challengeDateKey = `${cYear}-${cMonth}-${cDay}`;

        // 2. Compare with the real RDO Date. 
        // If they don't match, the data is stale. DO NOT LOG.
        if (challengeDateKey !== today) {
            console.warn(`Strict Block: File date (${challengeDateKey}) does not match RDO date (${today}). Log skipped.`);
            return; 
        }
        // -------------------------

        let goldLog = JSON.parse(localStorage.getItem(LS_GOLD_LOG)) || [];
        const todayEntryIndex = goldLog.findIndex(entry => entry.date === today);

        const newEntry = {
            date: today,
            gold: goldAmount,
            streak: streakCount,
            general: generalCount,
            role: roleCount
        };

        if (todayEntryIndex > -1) {
            goldLog[todayEntryIndex] = newEntry;
        } else {
            goldLog.push(newEntry);
        }
        
        while (goldLog.length > 28) {
            goldLog.shift();
        }
        localStorage.setItem(LS_GOLD_LOG, JSON.stringify(goldLog));
    }

    function debugGoldStats(source) {
        console.group(`%cGOLD & STREAK DEBUG @ ${source}`, 'color: #FFC107; background: #333; padding: 4px; border-radius: 4px;');
        console.table({
            "RDO Day Key": getRDODayKey(),
            "Challenge Data Timestamp": PYTHON_CHALLENGE_TIMESTAMP,
            "Streak Count": localStorage.getItem(LS_STREAK_COUNT) || '0',
            "Multiplier Lock": localStorage.getItem(LS_STREAK_FOR_MULTIPLIER) || '0',
            "Last Completion Date": localStorage.getItem(LS_LAST_COMPLETION_DATE) || 'N/A',
            "Daily Status": localStorage.getItem(LS_CHALLENGE_STATUS) || 'incomplete',
            "Daily Gold (for Delta)": localStorage.getItem('dailyGoldTotalForComparison') || '0.00 Gold Bars',
            "7-Day Cycle Gold": localStorage.getItem(LS_STREAK_GOLD_TOTAL) || '0.00',
            "Running Streak Gold": localStorage.getItem(LS_STREAK_GOLD_TOTAL_RUNNING) || '0.00'
        });
        const goldLog = JSON.parse(localStorage.getItem(LS_GOLD_LOG)) || [];
        console.log("Last 28 Days Gold Log:");
        console.table(goldLog);
        console.groupEnd();
    }

    function getHumanReadableDate(date) {
        const weekdays = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"];
        const months = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AAU", "SEP", "OCT", "NOV", "DEC"];
        
        const day = date.getUTCDate();
        const weekday = weekdays[date.getUTCDay()];
        const month = months[date.getUTCMonth()];
        const year = date.getUTCFullYear();
        
        let suffix = 'th';
        if (day % 10 === 1 && day !== 11) suffix = 'st';
        if (day % 10 === 2 && day !== 12) suffix = 'nd';
        if (day % 10 === 3 && day !== 13) suffix = 'rd';

        return `${weekday}, ${day}${suffix} ${month} ${year}`;
    }
    
function renderGoldLogChart() {
        const GOLD_CHART_MULTIPLIER = 12; 
        const container = document.getElementById('gold-log-chart-container');
        const infoDisplay = document.getElementById('chart-info-display');
        if (!container || !infoDisplay) return;

        // --- AUDIO SETUP ---
        if (!window.rdoAudioCtx) {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            window.rdoAudioCtx = new AudioContext();

            const unlockAudio = () => {
                const ctx = window.rdoAudioCtx;
                if (ctx.state === 'suspended') {
                    ctx.resume().then(() => {
                        document.removeEventListener('click', unlockAudio);
                        document.removeEventListener('keydown', unlockAudio);
                    });
                }
            };

            document.addEventListener('click', unlockAudio);
            document.addEventListener('keydown', unlockAudio);
        }
        
        function playHoverTick() {
            const ctx = window.rdoAudioCtx;
            if (!ctx || ctx.state === 'suspended') return;
            
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            
            osc.connect(gain);
            gain.connect(ctx.destination);
            
            osc.type = 'triangle'; 
            osc.frequency.setValueAtTime(1200, ctx.currentTime);
            
            gain.gain.setValueAtTime(0.2, ctx.currentTime); 
            gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.05);
            
            osc.start();
            osc.stop(ctx.currentTime + 0.05);
        }
        // -------------------

        infoDisplay.innerHTML = '&nbsp;';
        const goldLog = JSON.parse(localStorage.getItem(LS_GOLD_LOG)) || [];
        container.innerHTML = '';

        if (goldLog.length === 0) {
            container.innerHTML = '<p style="color: #666; font-size: 0.8rem; text-align: center; width: 100%;">No gold data logged yet.</p>';
            return;
        }

        function getBarColorForStreak(streak) {
            if (!streak || streak === 0) return '#555555';
            if (streak >= 22) return '#FFD200'; 
            if (streak >= 15) return '#E4B800'; 
            if (streak >= 8)  return '#C59A00'; 
            return '#A57C00';                   
        }

        const styles = window.getComputedStyle(container);
        const gap = parseFloat(styles.gap) || 2;
        const totalInnerWidth = container.clientWidth - (parseFloat(styles.paddingLeft) + parseFloat(styles.paddingRight));
        const totalGapWidth = gap * (28 - 1);
        const availableWidthForBars = totalInnerWidth - totalGapWidth;
        const barWidth = Math.max(Math.floor(availableWidthForBars / 28), 1);

        // --- ANTI-FLICKER TIMER VARIABLE ---
        let tooltipLeaveTimer;

        goldLog.forEach(entry => {
            const barHeight = Math.max((entry.gold * GOLD_CHART_MULTIPLIER), 0);
            const wrapper = document.createElement('div');
            wrapper.className = 'chart-bar-wrapper';
            wrapper.style.width = `${barWidth}px`;
            
            const bar = document.createElement('div');
            bar.className = 'chart-bar';
            bar.style.height = `${barHeight}px`;
            
            const originalColor = getBarColorForStreak(entry.streak);
            bar.style.backgroundColor = originalColor;
            
            bar.style.transition = 'background-color 0.05s, box-shadow 0.05s';

            wrapper.appendChild(bar);
            container.appendChild(wrapper);

            const date = new Date(entry.date + 'T12:00:00Z');

            wrapper.addEventListener('mouseenter', () => {
                // 1. CANCEL THE CLEAR: If coming from another bar, stop the text from disappearing
                if (tooltipLeaveTimer) clearTimeout(tooltipLeaveTimer);

                bar.style.backgroundColor = '#FFFFFF';
                bar.style.boxShadow = '0 0 8px rgba(255, 255, 255, 0.9)';
                playHoverTick();

                const placeholder = '-';
                const streakDay = entry.streak || 0;
                const streakText = streakDay > 0
                    ? `Day ${streakDay} (Week ${Math.floor((streakDay - 1) / 7) + 1})`
                    : `Day ${placeholder} (Week ${placeholder})`;

                const generalCount = entry.general !== undefined ? entry.general : placeholder;
                const roleCount = entry.role !== undefined ? entry.role : placeholder;
                const challengesText = `Gen: ${generalCount}/7, Role: ${roleCount}/9`;
                
                const genDone = entry.general === 7;
                const roleDone = entry.role === 9;
                let starIndicator = '';

                if (genDone && roleDone) {
                    starIndicator = ' <span style="color: #FFD700;">⭐</span>';
                } else if (genDone || roleDone) {
                    starIndicator = ' <span style="filter: grayscale(100%) brightness(1.3);">⭐</span>';
                }

                const tooltipHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: baseline; width: 100%; font-size: 0.9rem; margin-bottom: 2px;">
                        <span style="font-weight: bold;">${getHumanReadableDate(date)}</span>
                        <span style="font-size: 110%;">${entry.gold.toFixed(2)} Gold${starIndicator}</span>
                    </div>
                    <div style="font-size: 0.8rem; color: #999; line-height: 1.2;">
                        <div>Streak: ${streakText}</div>
                        <div>Challenges: ${challengesText}</div>
                    </div>
                `;
                infoDisplay.innerHTML = tooltipHTML;
                infoDisplay.style.color = '#aaa';
            });

            wrapper.addEventListener('mouseleave', () => {
                bar.style.backgroundColor = originalColor;
                bar.style.boxShadow = 'none';
                
                // 2. DELAY THE CLEAR: Wait 50ms before clearing text. 
                // If user enters another bar in this time, step 1 cancels this.
                tooltipLeaveTimer = setTimeout(() => {
                    infoDisplay.innerHTML = '&nbsp;';
                    infoDisplay.style.color = '#888';
                }, 50);
            });
        });
    }
    
    
    
    // --- CORE LOGIC FUNCTIONS ---
    function loadStreak() {
        let currentStreak = parseInt(localStorage.getItem(LS_STREAK_COUNT) || '0', 10);
        const lastCompletionDateStr = localStorage.getItem(LS_LAST_COMPLETION_DATE);
        const currentDayKey = getRDODayKey();
        
        if (PYTHON_STREAK_OVERRIDE > -1) {
            setStreakCount(PYTHON_STREAK_OVERRIDE, true); 
            currentStreak = PYTHON_STREAK_OVERRIDE; 
            localStorage.setItem(LS_STREAK_FOR_MULTIPLIER, currentStreak);
        }
        
        if (lastCompletionDateStr) {
            const daysDifference = getDateDifferenceInDays(currentDayKey, lastCompletionDateStr);
            
            if (daysDifference > 1) {
                currentStreak = 0; 
                setStreakCount(0, false); 
                localStorage.setItem(LS_STREAK_FOR_MULTIPLIER, 0);
                localStorage.setItem(LS_STREAK_GOLD_TOTAL, '0.00');
                localStorage.setItem(LS_STREAK_GOLD_TOTAL_RUNNING, '0.00');
            } else if (daysDifference === 1) {
                if (currentStreak >= MAX_RDO_STREAK) {
                    currentStreak = 0; 
                    setStreakCount(0, false);
                    localStorage.setItem(LS_STREAK_FOR_MULTIPLIER, 0);
                    localStorage.setItem(LS_STREAK_GOLD_TOTAL, '0.00');
                    localStorage.setItem(LS_STREAK_GOLD_TOTAL_RUNNING, '0.00');
                } else {
                    localStorage.setItem(LS_STREAK_FOR_MULTIPLIER, currentStreak);
                }
                localStorage.removeItem(LS_CHALLENGE_STATUS);
                localStorage.removeItem(LS_LAST_COMPLETION_DATE); 
                localStorage.setItem('dailyGoldTotalForComparison', '0.00 Gold Bars');
            }
        } else if (currentStreak > 0) {
             localStorage.setItem(LS_STREAK_FOR_MULTIPLIER, currentStreak);
        }
        document.getElementById('current-streak').textContent = `${currentStreak} Days`;
    }

    function handleStreakUpdate(isTicked) {
        const challengesCompleted = Array.from(allCheckboxes).filter(cb => cb.checked).length;
        const currentStatus = localStorage.getItem(LS_CHALLENGE_STATUS);
        const lockedStreakForMultiplier = parseInt(localStorage.getItem(LS_STREAK_FOR_MULTIPLIER) || '0', 10);
        
        if (isTicked && challengesCompleted > 0 && currentStatus !== 'completed') {
            const newStreak = lockedStreakForMultiplier + 1;
            if (newStreak > 0 && newStreak % 7 === 0) {
                localStorage.setItem(LS_STREAK_GOLD_TOTAL, '0.00');
            }
            setStreakCount(newStreak, true);
        } else if (!isTicked && challengesCompleted === 0 && currentStatus === 'completed') {
            setStreakCount(lockedStreakForMultiplier, false);
        }
        
        updateCounters();
    }

    function updateCounters() {
        const generalDone = Array.from(generalCheckboxes).filter(cb => cb.checked).length;
        const roleDone = Math.min(
            Array.from(roleCheckboxes).filter(cb => cb.checked && cb.closest('.role-challenge')?.style.display !== 'none').length,
            9
        );

        document.getElementById('general-counter').textContent = `${generalDone}/7`;
        document.getElementById('general-counter').classList.toggle('counter-glow', generalDone === 7);
        document.getElementById('role-counter').textContent = `${roleDone}/9`;
        document.getElementById('role-counter').classList.toggle('counter-glow', roleDone === 9);
        
        const currentStreak = parseInt(localStorage.getItem(LS_STREAK_COUNT) || '0', 10);
        document.getElementById('current-streak').textContent = `${currentStreak} Days`;
        
        const dailyGoldTotal = calculateDailyGoldTotal(generalDone, roleDone);
        
        logDailyGold(dailyGoldTotal, currentStreak, generalDone, roleDone);
        
        const goldDisplay = document.getElementById('daily-gold-total');
        const cycleGoldDisplay = document.getElementById('cycle-gold-total');
        const streakGoldDisplay = document.getElementById('streak-gold-total');
        
        const dailyTotalForComparison = localStorage.getItem('dailyGoldTotalForComparison') || '0.00 Gold Bars';
        const newGoldHTML = formatGoldForDisplay(dailyGoldTotal);

        if (dailyTotalForComparison !== newGoldHTML) {
            const oldGoldValue = parseFloat(dailyTotalForComparison.replace(/<[^>]*>| Gold Bars/g, '').replace(' .', '.') || '0.00');
            const goldDelta = dailyGoldTotal - oldGoldValue;
            
            let currentCycleGold = parseFloat(localStorage.getItem(LS_STREAK_GOLD_TOTAL) || '0.00');
            let runningStreakGold = parseFloat(localStorage.getItem(LS_STREAK_GOLD_TOTAL_RUNNING) || '0.00');

            currentCycleGold += goldDelta;
            runningStreakGold += goldDelta;

            localStorage.setItem(LS_STREAK_GOLD_TOTAL, currentCycleGold.toFixed(2));
            localStorage.setItem(LS_STREAK_GOLD_TOTAL_RUNNING, runningStreakGold.toFixed(2));
            localStorage.setItem('dailyGoldTotalForComparison', newGoldHTML);

            [goldDisplay, cycleGoldDisplay, streakGoldDisplay].forEach(el => {
                if (el) {
                    el.classList.remove('gold-exciting-flash');
                    void el.offsetWidth;
                    el.classList.add('gold-exciting-flash');
                }
            });
            setTimeout(() => {
                [goldDisplay, cycleGoldDisplay, streakGoldDisplay].forEach(el => {
                    if (el) el.classList.remove('gold-exciting-flash');
                });
            }, 1000);
        }

        goldDisplay.innerHTML = newGoldHTML;
        cycleGoldDisplay.innerHTML = formatGoldForDisplay(parseFloat(localStorage.getItem(LS_STREAK_GOLD_TOTAL) || '0.00'));
        streakGoldDisplay.innerHTML = formatGoldForDisplay(parseFloat(localStorage.getItem(LS_STREAK_GOLD_TOTAL_RUNNING) || '0.00'));

        const rolesContainer = document.getElementById('roles-container') || document.body;
        rolesContainer.classList.toggle('all-roles-completed', roleDone === 9);
        document.querySelectorAll('.difficulty-toggle').forEach(toggle => {
            toggle.classList.toggle('dimmed-text', roleDone === 9);
        });
        updateRoleHeadingCompletion();
        renderGoldLogChart();

        localStorage.setItem('rdoLastKnownTimestamp', PYTHON_CHALLENGE_TIMESTAMP);
        debugGoldStats("updateCounters");
    }
    
    // --- EVENT LISTENERS & INITIALIZATION ---

    function updateRoleHeadingCompletion() {
        document.querySelectorAll('.role-container').forEach(roleContainer => {
            const visibleChallenges = Array.from(roleContainer.querySelectorAll('.role-challenge')).filter(ch => ch.style.display !== 'none');
            const allCompleted = visibleChallenges.length > 0 && visibleChallenges.every(ch => ch.querySelector('.challenge-checkbox')?.checked);
            const heading = roleContainer.querySelector('.role-heading');
            if (heading) {
                heading.classList.toggle('dimmed', allCompleted);
            }
        });
    }

    function adjustStreak(amount) {
        let currentStreak = parseInt(localStorage.getItem(LS_STREAK_COUNT) || '0', 10);
        const newStreak = Math.min(MAX_RDO_STREAK, Math.max(0, currentStreak + amount));
        if (newStreak !== currentStreak) {
            localStorage.setItem(LS_STREAK_COUNT, newStreak);
            localStorage.setItem(LS_STREAK_FOR_MULTIPLIER, newStreak);
            if (newStreak === 0) {
                localStorage.setItem(LS_STREAK_GOLD_TOTAL, '0.00');
                localStorage.setItem(LS_STREAK_GOLD_TOTAL_RUNNING, '0.00');
            }
            updateCounters();
        }
    }

    document.getElementById('streak-up').addEventListener('click', () => adjustStreak(1));
    document.getElementById('streak-down').addEventListener('click', () => adjustStreak(-1));

    function setRoleDifficultyView(roleContainer, difficulty) {
        roleContainer.querySelectorAll('.role-challenge').forEach(challenge => {
            challenge.style.display = (challenge.dataset.difficulty === difficulty) ? '' : 'none';
        });
        const toggle = roleContainer.querySelector('.difficulty-toggle');
        if (toggle) {
            toggle.dataset.difficulty = difficulty;
            const desc = difficulty === 'easy' ? 'Rank 1–5' : difficulty === 'med' ? 'Rank 6–14' : 'Rank 15+';
            toggle.textContent = `(${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)}: ${desc})`;
        }
    }

    function cleanupHiddenTickedChallenges(roleContainer) {
        roleContainer.querySelectorAll('.role-challenge[style*="display: none"] .challenge-checkbox:checked').forEach(checkbox => {
            checkbox.checked = false;
            const key = `${PYTHON_CHALLENGE_TIMESTAMP}_${checkbox.id}`;
            localStorage.setItem(key, false);
            handleStreakUpdate(false);
        });
    }
    
    function nextDifficulty(current) {
        if (current === 'easy') return 'med';
        if (current === 'med') return 'hard';
        return 'easy';
    }

    // --- INITIALIZATION SEQUENCE ---

    // 1. Set up the difficulty view for each role.
    document.querySelectorAll('.difficulty-toggle').forEach(toggle => {
        const roleContainer = toggle.closest('.role-container');
        const roleHeadingElement = roleContainer.querySelector('.role-heading');
        let roleName = 'generic-role';
        if (roleHeadingElement) {
            const headingText = roleHeadingElement.cloneNode(true);
            headingText.querySelector('.difficulty-toggle')?.remove();
            roleName = headingText.textContent.trim().toLowerCase().replace(/[^a-z0-9]/g, '');
        }
        const lsKey = `difficulty_${roleName}`;
        const savedDifficulty = localStorage.getItem(lsKey) || 'hard'; 
        
        setRoleDifficultyView(roleContainer, savedDifficulty); 
        
        toggle.addEventListener('click', () => {
            if (toggle.classList.contains('dimmed-text')) return;
            const newDifficulty = nextDifficulty(toggle.dataset.difficulty || 'hard');
            localStorage.setItem(lsKey, newDifficulty);
            
            setRoleDifficultyView(roleContainer, newDifficulty);
            cleanupHiddenTickedChallenges(roleContainer);
        });
    });
    
    // 2. Now that view is correct, load states and attach event listeners.
    allCheckboxes.forEach(cb => {
        const key = `${PYTHON_CHALLENGE_TIMESTAMP}_${cb.id}`;
        cb.checked = localStorage.getItem(key) === "true";
        const wrapper = cb.closest('.challenge') || cb.closest('.role-challenge');
        if (wrapper) {
            wrapper.classList.toggle('completed', cb.checked);
        }
        
        cb.addEventListener('change', () => {
            if (wrapper) {
                wrapper.classList.toggle('completed', cb.checked);
            }
            localStorage.setItem(key, cb.checked);
            handleStreakUpdate(cb.checked);
        });
    });
    
    // 3. Load streak and run initial counter calculations.
    loadStreak();
    updateCounters();
    debugGoldStats("Initial Page Load");
    
    // FIX FOR 1-PIXEL BAR BUG: Attach listeners to render chart after page is fully loaded/resized.
    window.addEventListener('load', renderGoldLogChart);
    window.addEventListener('resize', renderGoldLogChart);
});

// ////////////////////////////////////////////////////////////////////////////////////// //
// JavaScript: Pause Button Code                                                          //
// ////////////////////////////////////////////////////////////////////////////////////// //

document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('pauseBtn').addEventListener('click', () => {
      fetch('http://127.0.0.1:6969/pause', {
        method: 'POST'
      })
      .then(response => response.text())
      .then(data => alert('Server response: ' + data))
      .catch(error => alert('Error: ' + error));
    });
});
</script>




  
</body>
</html>
